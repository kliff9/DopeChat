{% extends 'base/Nav.html' %} {% load static %} {% block nav %}



      <!------------------------------------------------ Header + Forms to Join a Room ------------------------------------------------>

  <header class="">
    <div
      class="page-header min-vh-75 m-3 rounded-4"
      style="
        background-image: url(https://media.istockphoto.com/photos/telework-video-meeting-concept-picture-id1407685529?b=1&k=20&m=1407685529&s=170667a&w=0&h=GFPdW5NfXrQwpAT-AaHeK6ZBJUDu56SzdP1EOWV0qWs=);
      "
    >
      <span class="mask bg-dark"></span>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-white text-center">
            <h1 class="text-white">Where hanging out is easy</h1>
            <p class="lead lead-400">
              Grab a seat in a voice channel when you’re free. Friends in your
              server can see you’re around and instantly pop in to talk without
              having to call.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <form
        class="row bg-white shadow-lg mt-n6 rounded-3 pb-4 p-3 mx-sm-0 mx-1 position-relative buttons"
        id="Chat_form"
      >
      <div class="d-flex align-items-baseline" ><h5>Join With Friends. </h5> <P class="ms-3 lead">Connect with friends by joining the same room</P></div>
        <div class="col-lg-4 mt-lg-n2 mt-2">
          <label class="">Room</label>
          <input
            class="form-control datepicker-1 flatpickr-input active"
            placeholder="Please write the name of the room"
            type="text"
            name="room"
            id=""
          />
        </div>
        <div class="col-lg-4 mt-lg-n2 mt-2">
          <label class="">Name</label>
          <input
            class="form-control datepicker-2 flatpickr-input active"
            placeholder="Please write your dispaly name"
            type="text"
            name="name"
          />
        </div>
        <div class="col-lg-4 d-flex align-items-center my-auto">
          <button
            type="submit"
            class="btn bg-gradient-warning w-100 btn-lg mb-0 m4 mt-3"
          >
            Join a Room
          </button>

        </div>

      </form>
      <form
      class="row bg-white shadow-lg mt-3 rounded-3 pb-4 p-3 mx-sm-0 mx-1 position-relative buttons"
      id="Random_Chat_form">
      <div class="d-flex align-items-baseline" ><h5>Meet New People. </h5> <P class="ms-3 lead">Connect with people from around the globe</P></div>

      <div class="col-lg-6 mt-lg-n2 mt-2">
        <label class="">Name</label>
        <input
          class="form-control datepicker-2 flatpickr-input active"
          placeholder="Please write your dispaly name"
          type="text"
          name="name"
        />
      </div>

      <div class="col-lg-6 d-flex align-items-center my-auto">
        <button
      type="submit"
      id="handleSubmit"
      class="btn bg-gradient-warning w-100 btn-lg mb-0 m4 mt-3 "
    >
     Chat With a Random Person
    </button>

      </div>

    </form>
  </header>

    <!------------------------------------------------ End of Header  ------------------------------------------------>


    <!------------------------------------------------ Extra Information Section ------------------------------------------------>

  <section class="mt-4">
    <div class="container pt-5">
      <div class="row align-items-center">
        <div class="col-md-6">
          <div class="text-center">
            <img
              src="https://i.imgur.com/vzgrug2.jpg"
              alt="img-blur-shadow"
              class="img-fluid shadow border-radius-lg"
            />
          </div>
        </div>
        <div class="col-md-6 mb-md-0 mb-4 ps-5 mt-md-0 mt-4">
          <h3 class="mb-3" spellcheck="false">
            Where having Dope Chats is easy
          </h3>
          <p class="mb-md-5 mb-4 lead-font">
            Where just you and a handful of friends can spend time together. A
            place that makes it easy to talk every day and hang out more often. Feeling Lonely? You can now also meet new people from around the globe
          </p>
          <a href="#" class="btn bg-gradient-warning">Read more</a>
        </div>

      </div>
    </div>
  </section>
  <!------------------------------------------------ End of Extra Information Section  ------------------------------------------------>


  <!--                                         Features                       -->
  <section class="py-5">
    <div class="container">
        <div class="row ">
            <div class="col-md-6">
                <h3 class="mb-4">Our Features</h3>
                <p class="mb-4"> This Video-Conference application is all about keeping the user experience Simple and  Effective.</p>
            </div>
            <div class="col-md-6 text-md-end my-auto">
                <a href="#" class="btn  bg-gradient-warning">Read more</a>
            </div>
            <div class="col-md-6 mb-4">
                <div class="info bg-white shadow-lg p-4 border-radius-lg">
                    <div class="icon mx-auto text-dark">
                        <i class="fa fa-mobile-screen-button text-gradient fa-2x text-warning" aria-hidden="true"></i>
                    </div>
                    <h5 class="mt-3 text-dark">Join anywhere, on any device</h5>
                    <p class="text-sm">You can start or join a call from anywhere with the click of a button.

                    </p>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="info bg-white shadow-lg p-4 border-radius-lg">
                    <div class="icon mx-auto text-dark">
                        <i class="fa fa-tv text-gradient fa-2x text-warning" aria-hidden="true"></i>
                      </div>
                    <h5 class="mt-3 text-dark">1080p video and audio</h5>

                    <p class="text-sm">Bring 1080p video and audio to your meetings.

                    </p>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="info bg-white shadow-lg p-4 border-radius-lg">
                    <div class="icon mx-auto text-dark">
                        <i class="fa fa-globe text-gradient fa-2x text-warning" aria-hidden="true"></i>
                    </div>
                    <h5 class="mt-3 text-dark">Meet New People</h5>

                    <p class="text-sm"> With a click of a button meet new people from around the world.</p>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="info bg-white shadow-lg p-4 border-radius-lg">
                    <div class="icon mx-auto text-dark">
                        <i class="fa  fa-user-xmark text-gradient fa-2x text-warning " aria-hidden="true"></i>
                    </div>
                    <h5 class="mt-3 text-dark">No Signup or Login Necessary</h5>

                    <p class="text-sm">Just fill in the form and get connected with your peers.</p>
                </div>
            </div>
            </div>
        </div>
    </div>
</section>
  <!------------------------------------------------ End of Features  ------------------------------------------------>




<script>
  // ------------------------------------------------ Function that sends Information to the stream.js -------------------------------------------- \\\

  const buttons_ = document.getElementsByClassName("buttons");

  let handleSubmit = async (e) => {
    e.preventDefault();

    let name = e.target.name.value;
    let room

    if(e.target.id === "Chat_form"){
       room = e.target.room.value.toUpperCase();
    console.log("Chat_form")

    } else {
      console.log("Not Chat_form")
      let current = await fetch(`/get_RandomRoom`)
      currentdata = await current.json()
      console.log('currentdata:', currentdata.room)
      room = currentdata.room.RoomName.toUpperCase();
      console.log(room)
      Random = true
      sessionStorage.setItem("Random", Random);


    }

    let response = await fetch(`/get_token/?channel=${room}`);
    let data = await response.json();
    console.log("data: ", data);

    let UID = data.uid;
    let token = data.token;
    sessionStorage.setItem("UID", UID);
    sessionStorage.setItem("token", token);
    sessionStorage.setItem("room", room);
    sessionStorage.setItem("name", name);

    window.open("/room/", "_self"); //redirect
  };

  buttons_[0].addEventListener("submit", handleSubmit);
  buttons_[1].addEventListener("submit", handleSubmit);


</script>

{% endblock nav %}
